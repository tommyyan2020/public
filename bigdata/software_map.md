# 大数据组件安装情况表

## 1、组件

| 组件名\基本情况                        | 版本                          | 路径                                                                          | 部署情况/端口                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 命令                                                                                                                                                                                                                                                                                                            |
| -------------------------------------- | ----------------------------- | ----------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Flink**                        | 1.13.0                        | 根目录：/usr/bd/flink/<br />  配置：conf/ <br /> 日志： test                  | **JobManager** : 101 <br /> -- 8081 : [web](http://182.87.223.144/flink/)<br /> -- 6123 : jobmanager.rpc.port <br />-- 两个随机端口 <br /> **TaskManager（Workers）** : 103 / 104 / 105 / 106 <br /> -- 三个随机端口                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | cd bin<br />启动： start-cluster.sh<br /> 停止：stop-cluster.sh<br />s q l  ：sql-client.sh                                                                                                                                                                                                                     |
| **flink-streaming-platform-web** | tagV20210507<br />(flink1.12) | /usr/bd/flink-streaming-platform-web                                          | **web**：101<br /> -- 9084 : 内网 <br /> -- [39084 : 外网](http://182.87.223.144:39084/) <br />-- 未知：3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 启动：bin/deploy.sh start<br /> 停止：bin/deploy.sh stop                                                                                                                                                                                                                                                        |
| **hadoop**                       | 2.7.5                         | 根目录：/usr/bd/hadoop/<br />配置：/etc/hadoop <br />数据&日志: /data/hadoop/ | **DataNode(slaves)**：103 / 104 / 105 / 106<br />-- 50010：数据服务端口<br />-- 50020：ipc端口<br />-- 50075：web端口<br />-- 随机端口：<br /> **NameNode**: 101 <br /> -- [50070 : web](http://182.87.223.144:3080/) 外网3080<br /> -- 8020：rpc <br /> **SecondaryNamenode**：103<br />-- [9868：web](http://182.87.223.144:3081/) 外网3081<br />**Yarn/ResourceManager**：101<br />-- [8088：web](http://182.87.223.144:3082/cluster) 外网3082<br /> -- 8030-8033：scheduler/resource-tracker/applications manager/admin<br />**Yarn/NodeManager**：[103](http://182.87.223.144:3083/node/) / [104](http://182.87.223.144:3084/node/) / [105](http://182.87.223.144:3085/node/) / [106](http://182.87.223.144:3086/node/)<br />-- 8040：localizer <br /> -- 8042：web | 全部启动：sbin/start-all.sh<br />全部停止：sbin/stop-all.sh                                                                                                                                                                                                                                                     |
| kafka&zookeeper                        | kafka_2.12-2.4.0              | 根目录：/usr/bd/kafka<br />配置：config<br />日志：logs                       | **zookeeper**：103/104/105<br />-- 2181：对外服务端口<br />-- 3888：选举leader使用<br />-- 随机端口：jvm的监控<br />-- 2888：集群内机器通讯使用（Leader监听此端口）<br />**Kafka**：103/104/105<br />-- 9020：对外服务<br />-- 随机端口一个                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | **zookeeper**<br />-- 启动：sh bin/zookeeper-server-start.sh -daemon config/zookeeper.properties<br />-- 停止：sh bin/zookeeper-server-stop.sh<br />**kafka**<br />-- 启动：nohup bin/kafka-server-start.sh ./config/server.properties > logs/kafka.log &<br />-- 停止：sh bin/kafka-server-stop.sh |
| cmak (kafka web)                       | 3.0.0.5                       | /usr/bd/cmak                                                                  | -- 内部端口：38080<br />-- [外部端口：3087](http://182.87.223.144:3087/)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | start.sh<br />nohup bin/cmak -Dconfig.file=conf/application.conf -Dhttp.port=38080 -java-home /data/tools/jdk-11.0.1 > logs/cmak.log &                                                                                                                                                                          |
| zkui                                   | 2.0 on 13 Jul 2020            | 跟目录：/usr/bd/zkui<br />配置目录：target/config.cfg                         | -- 内部端口：9090<br />-- [外部端口：3088](http://182.87.223.144:3088/)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 启动命令：sh start.sh<br />cd target;nohup java -jar zkui-2.0-SNAPSHOT-jar-with-dependencies.jar >> ../logs/zkui.log &;cd ..                                                                                                                                                                                    |
| hbase                                  | 1.4.13                        | 根目录：/usr/bd/hbase<br />配置目录：conf                                     | HMaster：101<br />-- 16000：ipc<br />-- 16010：web，[外网：3089](http://182.87.223.144:3089/)<br />HRegionServer：[103](http://182.87.223.144:3090/)/[104](http://182.87.223.144:3091/)/[105](http://182.87.223.144:3092/)/[106](http://182.87.223.144:3093/)<br />-- 16020：ipc<br />-- 16030：web：外网3090~3093                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 启动：sh bin/start-hbase.sh<br />停止：sh bin/stop-hbase.sh                                                                                                                                                                                                                                                     |
| hive                                   | 2.39                          | 根目录：/usr/bd/hive<br />配置目录：conf                                      | -- 9083 : thrift metastore<br />-- 10000：thrift ipc<br />-- 10002：web，[外网：3094](http://182.87.223.144:3094/)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 启动：<br />hive：nohup bin/hive --service hiveserver2 &<br />metastore：nohup bin/hive --service metastore &                                                                                                                                                                                                   |
| spark                                  | 3.1.2-bin-hadoop2.7           | 根目录：/usr/bd/spark<br />配置目录：conf                                     | Master：101<br />-- 8080：web，外网：[3095](http://182.87.223.144:3095/)<br />-- 7077：ipc<br />Worker：[103](http://182.87.223.144:3096/)/[104](http://182.87.223.144:3097/)/[105](http://182.87.223.144:3098/)/[106](http://182.87.223.144:3099/)<br />-- 8081：web<br />-- 随机端口                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 启动：sh sbin/start-all.sh<br />停止：sh sbin/stop-all.sh                                                                                                                                                                                                                                                       |
| canal                                  | 1.15                          | /usr/bd/canal                                                                 | deploy:101<br />- 11110（admin.port）<br />- 11111（port）<br />- 11112（metrics.pull.port）<br />admin: 101<br />- [8089](http://182.87.223.144:8089/): web                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | deploy: sh bin/startup.sh<br />admin : sh admin/bin/startup.sh                                                                                                                                                                                                                                                  |
| presto                                 | 0.257                         | /usr/bd/presto                                                                | master：101，worker：103/104/105/106<br />- 9000：web，外网：[3100](http://182.87.223.144:3100/)<br />- 五个随机端口                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 后台方式启动：bin/launcher start<br />同步方式启动：bin/launcher run                                                                                                                                                                                                                                            |
| trino                                  | 359                           | /usr/bd/trino                                                                 | 由于使用使用了jdk12，使用了单独的trino账号启动<br />master：101，worker：103/104/105/106<br />- 9001：web，外网：[3101](http://182.87.223.144:3101/)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 后台方式启动：bin/launcher start<br />同步方式启动：bin/launcher run                                                                                                                                                                                                                                            |
| elasticsearch | 8.0 | /usr/bd/es | 端口 ：9200（web）9300 rpc <br />节点：103/104/105（bad）/106 | 启动：账号elasticsearch bin/elasticsearch -d<br />停止：杀进程 |
| kibana | 8.0 | /usr/bd/kibana | 端口：5601，机器：101 | 启动：账号elasticsearch nohup bin/kibana & |
| redis | 5.0.3 | /usr/bin/redis-server  /etc/redis.conf | master(101)(127.0.0.1:6379) | 服务方式启停（systemctrl） |

## 2、组件/机器

| 组件名称\节点名称 | master<br />192.168.56.101                                            | node01<br />192.168.56.103                                        | node02<br />192.168.56.104                    | node03<br />192.168.56.105                    | node04<br />192.168.56.106                    |
| :---------------: | --------------------------------------------------------------------- | ----------------------------------------------------------------- | --------------------------------------------- | --------------------------------------------- | --------------------------------------------- |
|       hdfs       | namenode（50070/8020)                                                 | secondarynamenode(9868)<br />datanode(50010/50020/50075/随机端口) | datanode(50010/50020/50075/随机端口)          | datanode(50010/50020/50075/随机端口)          | datanode(50010/50020/50075/随机端口)          |
|       yarn       | ResouceManager(8088/8030-8033)                                        | NodeManager(8040/8042)                                            | NodeManager(8040/8042)                        | NodeManager(8040/8042)                        | NodeManager(8040/8042)                        |
|       kafka       |                                                                       | kafka(9020/随机端口)                                              | kafka(9020/随机端口)                          | kafka(9020/随机端口)                          |                                               |
|       cmak       | cmak(38080)                                                           |                                                                   |                                               |                                               |                                               |
|     zookeeper     |                                                                       | QuorumPeerMain(2181/3888/随机端口)                                | QuorumPeerMain(2181/3888/2888/随机端口)       | QuorumPeerMain(2181/3888/随机端口)            |                                               |
|       zkui       | jar(zkui(9090))                                                       |                                                                   |                                               |                                               |                                               |
|       flink       | JobManager(8081/6123/两个随机端口) StandaloneSessionClusterEntrypoint | TaskManagerRunner(三个随机端口)                                   | TaskManagerRunner(三个随机端口)               | TaskManagerRunner(三个随机端口)               | TaskManagerRunner(三个随机端口)               |
|     flink-web     | flink-web(9084)                                                       |                                                                   |                                               |                                               |                                               |
|       hbase       | HMaster(16000/16010)                                                  | HRegionServer（16020/16030）                                      | HRegionServer（16020/16030）                  | HRegionServer（16020/16030）                  | HRegionServer（16020/16030）                  |
|       hive       | hive(RunJar 10000/100002)<br />metestore(RunJar 9083)                 |                                                                   |                                               |                                               |                                               |
|       spark       | Master(8080/7077)                                                     | Worker(8081/随机端口)                                             | Worker(8081/随机端口)                         | Worker(8081/随机端口)                         | Worker(8081/随机端口)                         |
|       canal       | CanalLauncher(11110, 11111, 11112)<br />CanalAdminApplication(8089)   |                                                                   |                                               |                                               |                                               |
|      presto      | PrestoServer（9000，5个随机端口）<br />coordinator                    | PrestoServer（9000，5个随机端口）<br />worker                     | PrestoServer（9000，5个随机端口）<br />worker | PrestoServer（9000，5个随机端口）<br />worker | PrestoServer（9000，5个随机端口）<br />worker |
|       trino       | TrinoServer（9001，5个随机端口）<br />coordinator                     | TrinoServer（9001，5个随机端口）<br />worker                      | TrinoServer（9001，5个随机端口）<br />worker  | TrinoServer（9001，5个随机端口）<br />worker  | TrinoServer（9001，5个随机端口）<br />worker  |
| kibana | nodejs 5601端口 |  |  |  |  |
| es |  | 9200/9300 | 9200/9300 | wrong | 9200/9300 |
| redis | 127.0.0.1:6379 |  |  |  |  |
